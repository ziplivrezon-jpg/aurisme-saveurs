<!DOCTYPE html>
<html lang="ht">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Aurisme - Pan√®l Kontw√≤l</title>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore-compat.js"></script>
    <style>
        :root { --bordeaux: #800000; --gold: #DAA520; }
        body { font-family: 'Segoe UI', sans-serif; background: #f0f2f5; margin: 0; display: flex; justify-content: center; align-items: center; min-height: 100vh; }
        
        /* LOGIN */
        #login-box { background: white; padding: 30px; border-radius: 20px; box-shadow: 0 10px 25px rgba(0,0,0,0.1); text-align: center; width: 90%; max-width: 350px; }
        .pin-input { width: 100%; padding: 15px; font-size: 24px; text-align: center; border: 2px solid #ddd; border-radius: 12px; margin-bottom: 20px; letter-spacing: 10px; }
        
        /* ADMIN PANEL */
        #admin-panel { display: none; background: white; padding: 25px; border-radius: 20px; box-shadow: 0 10px 25px rgba(0,0,0,0.1); width: 95%; max-width: 450px; border-top: 10px solid var(--bordeaux); }
        h2 { color: var(--bordeaux); text-align: center; margin-bottom: 25px; }
        label { font-size: 14px; font-weight: bold; color: #555; display: block; margin-top: 15px; }
        input, select { width: 100%; padding: 12px; margin-top: 5px; border-radius: 10px; border: 1px solid #ddd; box-sizing: border-box; font-size: 16px; }
        
        .btn-update { background: var(--bordeaux); color: white; border: none; padding: 15px; width: 100%; border-radius: 10px; font-weight: bold; cursor: pointer; margin-top: 25px; font-size: 16px; }
        .btn-update:active { transform: scale(0.98); }
        
        #status-msg { text-align: center; margin-top: 15px; font-weight: bold; padding: 10px; border-radius: 8px; display: none; }
    </style>
</head>
<body>

    <div id="login-box">
        <img src="Logo.png" width="80" style="border-radius: 50%; margin-bottom: 10px; border: 2px solid var(--gold);">
        <h3>Aks√® Administrat√®</h3>
        <input type="password" id="adminPin" class="pin-input" maxlength="4" placeholder="****">
        <button class="btn-update" onclick="checkPin()">Konekte</button>
    </div>

    <div id="admin-panel">
        <h2>Mizajou K√≤mand</h2>
        
        <label>ID K√≤mand (Ex: AUR001)</label>
        <input type="text" id="orderID" placeholder="Tape ID kliyan an bay la">

        <label>Chanje Estati</label>
        <select id="orderStatus">
            <option value="K√≤mand Resevwa ‚úÖ">‚úÖ Resevwa</option>
            <option value="Nan Preparasyon üç≥">üç≥ Nan Preparasyon</option>
            <option value="Nan Wout üõµ">üõµ Nan Wout</option>
            <option value="Livre ak Siks√® üèÅ">üèÅ Livre</option>
            <option value="K√≤mand Anile ‚ùå">‚ùå Anile</option>
        </select>

        <label>Non Livreur a</label>
        <input type="text" id="courierName" placeholder="Jean-Claude / Pierre / elatriye.">

        <button class="btn-update" onclick="updateFirebase()">Mete a Jou an Direk</button>
        <div id="status-msg"></div>
        
        <p onclick="location.reload()" style="text-align:center; font-size:12px; color:#999; cursor:pointer; margin-top:30px; text-decoration: underline;">Dekonekte</p>
    </div>

<script>
    // 1. KONFIGIRASYON FIREBASE (Mete pa w la)
    const firebaseConfig = { apiKey: "AIza...", projectId: "aurisme-app", appId: "1:..." };
    firebase.initializeApp(firebaseConfig);
    const db = firebase.firestore();

    // 2. TCHEKE PIN (K√≤d sekirite a se 2024 pou kounye a)
    function checkPin() {
        const pin = document.getElementById('adminPin').value;
        if(pin === "2024") {
            document.getElementById('login-box').style.display = 'none';
            document.getElementById('admin-panel').style.display = 'block';
        } else {
            alert("PIN nan pa bon!");
            document.getElementById('adminPin').value = "";
        }
    }

    // 3. MIZAJOU FIREBASE
    async function updateFirebase() {
        const id = document.getElementById('orderID').value.trim().toUpperCase();
        const status = document.getElementById('orderStatus').value;
        const courier = document.getElementById('courierName').value;
        const msgDiv = document.getElementById('status-msg');

        if(!id) return alert("Ou dwe mete yon ID!");

        msgDiv.style.display = "block";
        msgDiv.innerText = "Mizajou an kouran...";
        msgDiv.style.background = "#eee";

        try {
            await db.collection("orders_tracking").doc(id).set({
                status: status,
                courier: courier || "Ekip Aurisme",
                lastUpdate: new Date().toLocaleTimeString('fr-FR', {hour: '2-digit', minute:'2-digit'}) + " - " + new Date().toLocaleDateString('fr-FR'),
                timestamp: firebase.firestore.FieldValue.serverTimestamp()
            });
            
            msgDiv.innerText = "Siks√®! Pierre pral tande BIP la! üéâ";
            msgDiv.style.background = "#d4edda";
            msgDiv.style.color = "#155724";
            
            // Netwaye bwat la apre 3 segonn
            setTimeout(() => { msgDiv.style.display = "none"; }, 3000);
        } catch (error) {
            msgDiv.innerText = "Er√®: " + error.message;
            msgDiv.style.background = "#f8d7da";
        }
    }
</script>
</body>
</html>
